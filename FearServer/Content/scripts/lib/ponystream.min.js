var PonyStream = function () {
    function n(n) {
        var e = document.documentElement.style
        if (n in e) return n
        var t = ["webkit", "Moz", "ms", "O"]
        n = n.charAt(0).toUpperCase() + n.substr(1)
        for (var i = 0; i < t.length; i++) {
            var o = t[i] + n
            if (o in e) return o
        }
    } function e(n) {
        function e(e) {
            return function (t, i) {
                var o = new Image
                o.onload = function () { o.height > u && (u = o.height), t() }, o.onerror = i, o.src = n[e], l[e] = o
            }
        } n = n || y
        var t = []
        l = [], u = 58
        for (var i = 0; i < n.length; i++) t.push(new Promise(e(i)))
        return Promise.all(t).then(function () { c.loaded = !0 })
    } function t(n) { return n[Math.floor(Math.random() * n.length)] } function i() {
        var n = t(l), e = document.createElement("img")
        e.src = n.src, e.width = n.width, e.height = n.height
        var i = c.minDistance + Math.floor(Math.random() * (c.maxDistance - c.minDistance))
        return i > 0 && (e.style.margin = "0 " + i + "px 0 0"), { body: e, width: e.width + i }
    } function o(n) {
        for (; n.position > n.width;) {
            var e = i()
            n.node.appendChild(e.body), n.width += e.width, n.ponyCount++, n.ponySizes.push(e.width)
        }
    } function s(n) { for (var e; n.position >= f + (e = n.ponySizes[0]) ;) n.node.removeChild(n.node.firstChild), n.width -= e, n.ponyCount--, n.ponySizes.shift(), n.position -= e } function r() { g.position += c.speed, v.position += c.speed, s(v), s(g), m && (o(g), o(v)), g.node.style[w] = "scaleX(-1) translateX(" + (f - g.position) + "px)", v.node.style[w] = "translateX(" + (f - v.position) + "px)", h = g.ponyCount > 0 || v.ponyCount > 0 ? requestAnimationFrame(r) : void 0 } function a(n) {
        var e = document.createElement("div")
        e.className = "pony-track", e.style.position = "absolute", e.style.left = 0, e.style.right = 0, e.style.bottom = 0, e.style.top = 0
        var t = n ? "scaleX(-1) " : ""
        return e.style[w] = t + "translateX(" + f + "px)", e.style.whiteSpace = "nowrap", e
    } function p(n) {
        if (n = n || document.body, !l) throw Error("PonyStream: please load images first")
        if (!g.node) {
            if (f = n.getBoundingClientRect().width, 0 === f) return
            var e = document.createElement("div")
            e.className = "pony-arena", e.style.position = "absolute", e.style.left = 0, e.style.right = 0, e.style.bottom = 0, e.style.height = u + "px", e.style.pointerEvents = "none", e.style.overflow = "hidden", e.appendChild(g.node = a(!0)), e.appendChild(v.node = a()), n.appendChild(e)
        } h || (m = !0, g.ponyCount = 0, g.ponySizes.length = 0, g.width = 0, g.position = 0, v.ponyCount = 0, v.ponySizes.length = 0, v.width = 0, v.position = 0, h = requestAnimationFrame(r))
    } function d(n) { h ? m = !1 : p(n) } var l, f, u, h, c, m = !0, y = ["ponies/af.gif", "ponies/bm.gif", "ponies/cc.gif", "ponies/cs.gif", "ponies/dl.gif", "ponies/ib.gif", "ponies/jl.gif", "ponies/km.gif", "ponies/kr.gif", "ponies/lw.gif", "ponies/mk.gif", "ponies/mt.gif", "ponies/mu.gif", "ponies/ni.gif", "ponies/nk.gif", "ponies/rs.gif", "ponies/tj.gif", "ponies/tl.gif", "ponies/zf.gif"], g = { node: void 0, width: 0, ponyCount: 0, ponySizes: [], position: 0 }, v = { node: void 0, width: 0, ponyCount: 0, ponySizes: [], position: 0 }, w = n("transform")
    return c = { speed: 2, minDistance: 0, maxDistance: 80, load: e, loaded: !1, start: p, stop: function () { m = !1 }, toggle: d, version: "1.0.1", pause: function () { cancelAnimationFrame(h) } }
}()